<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<title>GCC Target Hook</title>


           <link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/css/htmlize.css"/>
           <link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/css/readtheorg.css"/>
           <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
           <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
           <script type="text/javascript" src="https://fniessen.github.io/org-html-themes/src/lib/js/jquery.stickytableheaders.min.js"></script>
           <script type="text/javascript" src="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/js/readtheorg.js"></script>
           <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
           <link rel="stylesheet" type="text/css" href="/main.css" media="screen" />
           <link rel="stylesheet" type="text/css" href="../main.css" media="screen" />
           <link rel="stylesheet" type="text/css" href="./main.css" media="screen" />
           <link rel = "icon" href = "/icon.png"  type = "image/x-icon">
</head>
<body>
<div id="content" class="content">
<h1 class="title">GCC Target Hook</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org0000098">1. GCC Target Hook</a>
<ul>
<li><a href="#org0000000">1.1. TARGET_PRINT_OPERAND</a></li>
<li><a href="#org0000003">1.2. TARGET_PRINT_OPERAND_ADDRESS</a></li>
<li><a href="#org0000006">1.3. TARGET_CONDITIONAL_REGISTER_USAGE</a></li>
<li><a href="#org000000a">1.4. TARGET_STRUCT_VALUE_RTX</a></li>
<li><a href="#org0000026">1.5. runtime target 相关</a>
<ul>
<li><a href="#ID-348daca9-594f-412e-ade1-cb27386a7bcc">1.5.1. TARGET_CPU_CPP_BUILTINS</a></li>
<li><a href="#org0000011">1.5.2. TARGET_OS_CPP_BUILTINS</a></li>
<li><a href="#org0000014">1.5.3. TARGET_OPTION_OVERRIDE</a></li>
<li><a href="#org0000017">1.5.4. TARGET_DEFAULT_TARGET_FLAGS</a></li>
<li><a href="#org000001a">1.5.5. TARGET_OPTION_OPTIMIZATION_TABLE</a></li>
<li><a href="#org000001d">1.5.6. TARGET_OPTION_INIT_STRUCT</a></li>
<li><a href="#ID-adb8ed04-4b61-487c-8b74-b043df441b74">1.5.7. TARGET_INIT_BUILTINS</a></li>
<li><a href="#ID-950e3222-5851-4dfb-8ea0-7c44c1bd157d">1.5.8. TARGET_EXPAND_BUILTIN</a></li>
</ul>
</li>
<li><a href="#org0000032">1.6. storage layout 相关</a>
<ul>
<li><a href="#org0000029">1.6.1. endian</a></li>
<li><a href="#org000002c">1.6.2. size</a></li>
<li><a href="#org000002f">1.6.3. align</a></li>
</ul>
</li>
<li><a href="#org0000041">1.7. register 相关</a>
<ul>
<li><a href="#org0000035">1.7.1. FIRST_PSEUDO_REGISTER</a></li>
<li><a href="#org0000038">1.7.2. FIXED_REGISTERS</a></li>
<li><a href="#org000003b">1.7.3. CALL_USED_REGISTERS</a></li>
<li><a href="#org000003e">1.7.4. REG_ALLOC_ORDER</a></li>
</ul>
</li>
<li><a href="#org0000059">1.8. stack 相关</a>
<ul>
<li><a href="#org0000044">1.8.1. STACK_GROWS_DOWNWARD</a></li>
<li><a href="#org0000047">1.8.2. FRAME_ADDR_RTX</a></li>
<li><a href="#org000004a">1.8.3. RETURN_ADDR_RTX</a></li>
<li><a href="#org000004d">1.8.4. STACK_POINTER_REGNUM</a></li>
<li><a href="#org0000050">1.8.5. FRAME_POINTER_REGNUM</a></li>
<li><a href="#org0000053">1.8.6. TARGET_STACK_PROTECT_GUARD</a></li>
<li><a href="#org0000056">1.8.7. TARGET_STACK_PROTECT_FAIL</a></li>
</ul>
</li>
<li><a href="#org000007a">1.9. cost 相关</a>
<ul>
<li><a href="#org000005c">1.9.1. TARGET_RTX_COSTS</a></li>
<li><a href="#org000005f">1.9.2. TARGET_ADDRESS_COST</a></li>
<li><a href="#org0000062">1.9.3. TARGET_SLOW_UNALIGNED_ACCESS</a></li>
<li><a href="#org0000065">1.9.4. MEMORY_MOVE_COST</a></li>
<li><a href="#org0000068">1.9.5. REGISTER_MOVE_COST</a></li>
<li><a href="#org000006b">1.9.6. BRANCH_COST</a></li>
<li><a href="#org000006e">1.9.7. SLOW_BYTE_ACCESS</a></li>
<li><a href="#org0000071">1.9.8. MOVE_RATIO</a></li>
<li><a href="#org0000074">1.9.9. CLEAR_RATIO</a></li>
<li><a href="#org0000077">1.9.10. SET_RATIO</a></li>
</ul>
</li>
<li><a href="#org000008c">1.10. schedule 相关</a>
<ul>
<li><a href="#org000007d">1.10.1. TARGET_SCHED_ISSUE_RATE</a></li>
<li><a href="#org0000080">1.10.2. TARGET_SCHED_ADJUST_COST</a></li>
<li><a href="#org0000083">1.10.3. TARGET_SCHED_ADJUST_PRIORITY</a></li>
<li><a href="#org0000086">1.10.4. TARGET_SCHED_REORDER</a></li>
<li><a href="#org0000092">1.10.5. &#x2026;</a></li>
</ul>
</li>
<li><a href="#org0000095">1.11. assembler format</a>
<ul>
<li><a href="#org000008f">1.11.1. ASM_OUTPUT_LABEL</a></li>
<li><a href="#org0000093">1.11.2. &#x2026;</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-org0000098" class="outline-2">
<h2 id="org0000098"><span class="section-number-2">1.</span> GCC Target Hook</h2>
<div class="outline-text-2" id="text-1">
<p>
<a href="https://gcc.gnu.org/onlinedocs/gccint/Target-Macros.html#Target-Macros">https://gcc.gnu.org/onlinedocs/gccint/Target-Macros.html#Target-Macros</a>
</p>

<p>
<a href="gcc_backend.html#ID-02e7f924-9cf7-4e3d-8ceb-1765fd3a2bed">GCC Backend</a> 的 example 里看到的
</p>

<ul class="org-ul">
<li>riscv_print_operand</li>
<li>riscv_print_operand_address</li>
<li>riscv_conditional_register_usage</li>
</ul>

<p>
都是 target hook.
</p>

<p>
target hook 定义在 target.def 中, 以 conditional_register_usage 为例:
</p>

<ul class="org-ul">
<li><p>
riscv 通过 TARGET_CONDITIONAL_REGISTER_USAGE 定义一个 hook 的实现
</p>

<div class="org-src-container">
<pre class="src src-C"><span class="org-preprocessor">#define</span> <span class="org-variable-name">TARGET_CONDITIONAL_REGISTER_USAGE</span> riscv_conditional_register_usage
</pre>
</div></li>

<li>代码中通过 targetm.conditional_register_usage () 调用到 target hook</li>
</ul>

<p>
gcc 通过 target hook 和 macro 的方式允许 backend 针对某些功能提供自己的实现
</p>
</div>

<div id="outline-container-org0000000" class="outline-3">
<h3 id="org0000000"><span class="section-number-3">1.1.</span> TARGET_PRINT_OPERAND</h3>
</div>

<div id="outline-container-org0000003" class="outline-3">
<h3 id="org0000003"><span class="section-number-3">1.2.</span> TARGET_PRINT_OPERAND_ADDRESS</h3>
</div>

<div id="outline-container-org0000006" class="outline-3">
<h3 id="org0000006"><span class="section-number-3">1.3.</span> TARGET_CONDITIONAL_REGISTER_USAGE</h3>
</div>

<div id="outline-container-org000000a" class="outline-3">
<h3 id="org000000a"><span class="section-number-3">1.4.</span> TARGET_STRUCT_VALUE_RTX</h3>
<div class="outline-text-3" id="text-1-4">
<p>
用来设置 <a href="gcc_named_return_value.html#ID-e53c6711-2a42-473c-af42-a27179f8c22b">GCC Named Return Value</a> 如何把 nrv 传递给 callee
</p>

<p>
例如:
</p>

<div class="org-src-container">
<pre class="src src-C"><span class="org-preprocessor">#define</span> <span class="org-variable-name">TARGET_STRUCT_VALUE_RTX</span> my_struct_value_rtx

<span class="org-keyword">static</span> <span class="org-type">rtx</span> <span class="org-function-name">my_struct_value_rtx</span>(
    tree <span class="org-type">fntype</span> <span class="org-variable-name">ATTRIBUTE_UNUSED</span>, <span class="org-type">int</span> <span class="org-variable-name">incoming</span> ATTRIBUTE_UNUSED) {
    <span class="org-keyword">return</span> gen_rtx_REG(Pmode, 13);
}
</pre>
</div>

<p>
表示用 reg 13 (riscv 的 a3) 传递 nrv. 若该宏没有定义, 则会把 nrv 看做 callee 的第一个参数来处理
</p>

<div class="org-src-container">
<pre class="src src-C"><span class="org-keyword">struct</span> <span class="org-type">X</span> {
    <span class="org-type">int</span> <span class="org-variable-name">a</span>;
    <span class="org-type">int</span> <span class="org-variable-name">b</span>;
    <span class="org-type">int</span> <span class="org-variable-name">c</span>;
    <span class="org-type">int</span> <span class="org-variable-name">d</span>;
    <span class="org-type">int</span> <span class="org-variable-name">e</span>;
    <span class="org-type">int</span> <span class="org-variable-name">f</span>;
};

<span class="org-keyword">struct</span> <span class="org-type">X</span> <span class="org-function-name">foo</span>(<span class="org-type">int</span> <span class="org-variable-name">a</span>) {
    <span class="org-keyword">struct</span> <span class="org-type">X</span> <span class="org-variable-name">x</span> = {0};
    x.a = a;
    <span class="org-keyword">return</span> x;
}
</pre>
</div>

<pre class="example" id="org0000009">
$&gt; /opt/riscv/bin/riscv64-unknown-linux-gnu-gcc  test.c -O1 -c
$&gt; /opt/riscv/bin/riscv64-unknown-linux-gnu-objdump -d ./test.o

0000000000000000 &lt;foo&gt;:
   0:   c288                    sw      a0,0(a3)
   2:   0006a223                sw      zero,4(a3)
   6:   0006a423                sw      zero,8(a3)
   a:   0006a623                sw      zero,12(a3)
   e:   0006a823                sw      zero,16(a3)
  12:   0006aa23                sw      zero,20(a3)
  16:   8536                    mv      a0,a3
  18:   8082                    ret
</pre>
</div>
</div>

<div id="outline-container-org0000026" class="outline-3">
<h3 id="org0000026"><span class="section-number-3">1.5.</span> runtime target 相关</h3>
<div class="outline-text-3" id="text-1-5">
</div>
<div id="outline-container-ID-348daca9-594f-412e-ade1-cb27386a7bcc" class="outline-4">
<h4 id="ID-348daca9-594f-412e-ade1-cb27386a7bcc"><span class="section-number-4">1.5.1.</span> TARGET_CPU_CPP_BUILTINS</h4>
<div class="outline-text-4" id="text-1-5-1">
<p>
这个 hook 会影响 gcc preprocessor, 通过 `builtin_define` 预定义了一些 runtime
macro
</p>

<div class="org-src-container">
<pre class="src src-C"><span class="org-type">void</span> <span class="org-function-name">riscv_cpu_cpp_builtins</span>(<span class="org-type">cpp_reader</span> *<span class="org-variable-name">pfile</span>) {
    builtin_define(<span class="org-string">"__riscv"</span>);

    <span class="org-keyword">if</span> (TARGET_RVC) builtin_define(<span class="org-string">"__riscv_compressed"</span>);

    <span class="org-keyword">if</span> (TARGET_RVE) builtin_define(<span class="org-string">"__riscv_32e"</span>);

    <span class="org-keyword">if</span> (TARGET_ATOMIC) builtin_define(<span class="org-string">"__riscv_atomic"</span>);

    <span class="org-keyword">if</span> (TARGET_MUL) builtin_define(<span class="org-string">"__riscv_mul"</span>);
    <span class="org-keyword">if</span> (TARGET_DIV) builtin_define(<span class="org-string">"__riscv_div"</span>);
    <span class="org-keyword">if</span> (TARGET_DIV &amp;&amp; TARGET_MUL) builtin_define(<span class="org-string">"__riscv_muldiv"</span>);

    builtin_define_with_int_value(<span class="org-string">"__riscv_xlen"</span>, UNITS_PER_WORD * 8);
    <span class="org-keyword">if</span> (TARGET_HARD_FLOAT)
        builtin_define_with_int_value(<span class="org-string">"__riscv_flen"</span>, UNITS_PER_FP_REG * 8);

    <span class="org-keyword">if</span> (TARGET_HARD_FLOAT &amp;&amp; TARGET_FDIV) {
        builtin_define(<span class="org-string">"__riscv_fdiv"</span>);
        builtin_define(<span class="org-string">"__riscv_fsqrt"</span>);
    }

    <span class="org-keyword">switch</span> (riscv_abi) {
        <span class="org-keyword">case</span> ABI_ILP32E:
            builtin_define(<span class="org-string">"__riscv_abi_rve"</span>);
            gcc_fallthrough();

        <span class="org-keyword">case</span> ABI_ILP32:
        <span class="org-keyword">case</span> ABI_LP64:
            builtin_define(<span class="org-string">"__riscv_float_abi_soft"</span>);
            <span class="org-keyword">break</span>;

        <span class="org-keyword">case</span> ABI_ILP32F:
        <span class="org-keyword">case</span> ABI_LP64F:
            builtin_define(<span class="org-string">"__riscv_float_abi_single"</span>);
            <span class="org-keyword">break</span>;

        <span class="org-keyword">case</span> ABI_ILP32D:
        <span class="org-keyword">case</span> ABI_LP64D:
            builtin_define(<span class="org-string">"__riscv_float_abi_double"</span>);
            <span class="org-keyword">break</span>;
    }
    <span class="org-comment-delimiter">/* </span><span class="org-comment">...</span><span class="org-comment-delimiter"> */</span>
}
</pre>
</div>

<p>
gcc 通过 <a href="gcc_backend.html#ID-f7666ebb-599a-4b96-b629-7868f9487023">march</a> 定义了 TARGET_MUL 等 macro, 但它们是给 gcc 使用的. 应用代码如果要得到 TARGET_MUL 类似的功能, 需要使用 TARGET_CPU_CPP_BUILTINS 通过 builtin_define
定义的 __riscv_mul
</p>

<p>
通过 `echo| /opt/riscv/bin/riscv64-unknown-linux-gnu-gcc  -E -dM -` 可以看到所有的 predefined macro
</p>

<pre class="example" id="org000000d">
$&gt; echo| /opt/riscv/bin/riscv64-unknown-linux-gnu-gcc  -E -dM -|grep -i riscv
#define __riscv 1
#define __riscv_atomic 1
#define __riscv_cmodel_medlow 1
#define __riscv_fdiv 1
#define __riscv_float_abi_double 1
#define __riscv_mul 1
#define __riscv_muldiv 1
#define __riscv_xlen 64
#define __riscv_fsqrt 1
#define __riscv_m 2000000
#define __riscv_a 2000000
#define __riscv_c 2000000
#define __riscv_d 2000000
#define __riscv_f 2000000
#define __riscv_i 2000000
#define __riscv_zicsr 2000000
#define __riscv_compressed 1
#define __riscv_flen 64
#define __riscv_arch_test 1
#define __riscv_div 1
#define __riscv_zifencei 2000000
</pre>
</div>


<div id="outline-container-org000009b" class="outline-5 references">
<h5 id="org000009b">Backlinks</h5>
<div class="outline-text-5" id="text-org000009b">
<p>
<a href="gcc_builtin.html#ID-b9dd7f04-f7f7-4a70-8f00-9e446df3339e">GCC Builtin</a>
(<i>GCC Builtin &gt; builtin_define</i>):  <a href="#ID-348daca9-594f-412e-ade1-cb27386a7bcc">TARGET_CPU_CPP_BUILTINS</a> 通过 builtin_define 来定义 runtime builtin macro (例如 __riscv_mul)
</p>
</div>
</div>
</div>


<div id="outline-container-org0000011" class="outline-4">
<h4 id="org0000011"><span class="section-number-4">1.5.2.</span> TARGET_OS_CPP_BUILTINS</h4>
<div class="outline-text-4" id="text-1-5-2">
<p>
用来定义 `linux`, `__linux__` 等 os 相关的 runtime macro
</p>
</div>
</div>

<div id="outline-container-org0000014" class="outline-4">
<h4 id="org0000014"><span class="section-number-4">1.5.3.</span> TARGET_OPTION_OVERRIDE</h4>
</div>

<div id="outline-container-org0000017" class="outline-4">
<h4 id="org0000017"><span class="section-number-4">1.5.4.</span> TARGET_DEFAULT_TARGET_FLAGS</h4>
<div class="outline-text-4" id="text-1-5-4">
<p>
指定 target_flags 的默认值
</p>
</div>
</div>

<div id="outline-container-org000001a" class="outline-4">
<h4 id="org000001a"><span class="section-number-4">1.5.5.</span> TARGET_OPTION_OPTIMIZATION_TABLE</h4>
<div class="outline-text-4" id="text-1-5-5">
<p>
针对某个 opt level 打开某个 opt
</p>
</div>
</div>

<div id="outline-container-org000001d" class="outline-4">
<h4 id="org000001d"><span class="section-number-4">1.5.6.</span> TARGET_OPTION_INIT_STRUCT</h4>
<div class="outline-text-4" id="text-1-5-6">
<p>
修改 gcc option
</p>
</div>
</div>

<div id="outline-container-ID-adb8ed04-4b61-487c-8b74-b043df441b74" class="outline-4">
<h4 id="ID-adb8ed04-4b61-487c-8b74-b043df441b74"><span class="section-number-4">1.5.7.</span> TARGET_INIT_BUILTINS</h4>
<div class="outline-text-4" id="text-1-5-7">
</div>


<div id="outline-container-org0000020" class="outline-5 references">
<h5 id="org0000020">Backlinks</h5>
<div class="outline-text-5" id="text-org0000020">
<p>
<a href="gcc_builtin.html#ID-b9dd7f04-f7f7-4a70-8f00-9e446df3339e">GCC Builtin</a>
(<i>GCC Builtin &gt; builtins</i>):  target 自定义的 builtin 由 <a href="#ID-adb8ed04-4b61-487c-8b74-b043df441b74">TARGET_INIT_BUILTINS</a> 和 <a href="#ID-950e3222-5851-4dfb-8ea0-7c44c1bd157d">TARGET_EXPAND_BUILTIN</a> 定义和 实现.
</p>
</div>
</div>
</div>


<div id="outline-container-ID-950e3222-5851-4dfb-8ea0-7c44c1bd157d" class="outline-4">
<h4 id="ID-950e3222-5851-4dfb-8ea0-7c44c1bd157d"><span class="section-number-4">1.5.8.</span> TARGET_EXPAND_BUILTIN</h4>
<div class="outline-text-4" id="text-1-5-8">
</div>


<div id="outline-container-org0000023" class="outline-5 references">
<h5 id="org0000023">Backlinks</h5>
<div class="outline-text-5" id="text-org0000023">
<p>
<a href="gcc_builtin.html#ID-b9dd7f04-f7f7-4a70-8f00-9e446df3339e">GCC Builtin</a>
(<i>GCC Builtin &gt; builtins</i>):  target 自定义的 builtin 由 <a href="#ID-adb8ed04-4b61-487c-8b74-b043df441b74">TARGET_INIT_BUILTINS</a> 和 <a href="#ID-950e3222-5851-4dfb-8ea0-7c44c1bd157d">TARGET_EXPAND_BUILTIN</a> 定义和 实现.
</p>
</div>
</div>
</div>
</div>


<div id="outline-container-org0000032" class="outline-3">
<h3 id="org0000032"><span class="section-number-3">1.6.</span> storage layout 相关</h3>
<div class="outline-text-3" id="text-1-6">
</div>
<div id="outline-container-org0000029" class="outline-4">
<h4 id="org0000029"><span class="section-number-4">1.6.1.</span> endian</h4>
<div class="outline-text-4" id="text-1-6-1">
<ul class="org-ul">
<li>BITS_BIG_ENDIAN</li>
<li>BYTES_BIG_ENDIAN</li>
<li>WORDS_BIG_ENDIAN</li>
<li>REG_WORDS_BIG_ENDIAN</li>
<li>FLOAT_WORDS_BIG_ENDIAN</li>
</ul>
</div>
</div>

<div id="outline-container-org000002c" class="outline-4">
<h4 id="org000002c"><span class="section-number-4">1.6.2.</span> size</h4>
<div class="outline-text-4" id="text-1-6-2">
<ul class="org-ul">
<li>BITS_PER_WORD</li>
<li>POINTER_SIZE</li>
</ul>
</div>
</div>

<div id="outline-container-org000002f" class="outline-4">
<h4 id="org000002f"><span class="section-number-4">1.6.3.</span> align</h4>
<div class="outline-text-4" id="text-1-6-3">
<ul class="org-ul">
<li>PARM_BOUNDARY</li>
<li>STACK_BOUNDARY</li>
<li>FUNCTION_BOUNDARY</li>
<li>BIGGEST_ALIGNMENT</li>
<li>MALLOC_ABI_ALIGNMENT</li>
<li>ATTRIBUTE_ALIGNED_VALUE</li>
<li>BIGGEST_FIELD_ALIGNMENT</li>
<li>DATA_ALIGNMENT</li>
<li>LOCAL_ALIGNMENT</li>
<li>STRICT_ALIGNMENT</li>
<li>&#x2026;</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org0000041" class="outline-3">
<h3 id="org0000041"><span class="section-number-3">1.7.</span> register 相关</h3>
<div class="outline-text-3" id="text-1-7">
<p>
<a href="gcc_pass.html#ID-48b544df-f83e-41b6-8cba-fc2e23d188a9">pass_ira</a> 会使用这些 macro
</p>
</div>

<div id="outline-container-org0000035" class="outline-4">
<h4 id="org0000035"><span class="section-number-4">1.7.1.</span> FIRST_PSEUDO_REGISTER</h4>
</div>

<div id="outline-container-org0000038" class="outline-4">
<h4 id="org0000038"><span class="section-number-4">1.7.2.</span> FIXED_REGISTERS</h4>
</div>

<div id="outline-container-org000003b" class="outline-4">
<h4 id="org000003b"><span class="section-number-4">1.7.3.</span> CALL_USED_REGISTERS</h4>
</div>

<div id="outline-container-org000003e" class="outline-4">
<h4 id="org000003e"><span class="section-number-4">1.7.4.</span> REG_ALLOC_ORDER</h4>
</div>
</div>

<div id="outline-container-org0000059" class="outline-3">
<h3 id="org0000059"><span class="section-number-3">1.8.</span> stack 相关</h3>
<div class="outline-text-3" id="text-1-8">
</div>
<div id="outline-container-org0000044" class="outline-4">
<h4 id="org0000044"><span class="section-number-4">1.8.1.</span> STACK_GROWS_DOWNWARD</h4>
</div>

<div id="outline-container-org0000047" class="outline-4">
<h4 id="org0000047"><span class="section-number-4">1.8.2.</span> FRAME_ADDR_RTX</h4>
<div class="outline-text-4" id="text-1-8-2">
<p>
<a href="gcc_builtin.html#ID-bd8d117c-f958-4411-a010-830ebab7b21d">__builtin_frame_address</a>
</p>
</div>
</div>

<div id="outline-container-org000004a" class="outline-4">
<h4 id="org000004a"><span class="section-number-4">1.8.3.</span> RETURN_ADDR_RTX</h4>
<div class="outline-text-4" id="text-1-8-3">
<p>
<a href="gcc_builtin.html#ID-ee9eaf96-77aa-4b80-a9c1-201ac0f01417">__builtin_return_address</a>
</p>
</div>
</div>

<div id="outline-container-org000004d" class="outline-4">
<h4 id="org000004d"><span class="section-number-4">1.8.4.</span> STACK_POINTER_REGNUM</h4>
</div>

<div id="outline-container-org0000050" class="outline-4">
<h4 id="org0000050"><span class="section-number-4">1.8.5.</span> FRAME_POINTER_REGNUM</h4>
</div>

<div id="outline-container-org0000053" class="outline-4">
<h4 id="org0000053"><span class="section-number-4">1.8.6.</span> TARGET_STACK_PROTECT_GUARD</h4>
<div class="outline-text-4" id="text-1-8-6">
<p>
和 <a href="gcc_stack_protector.html#ID-afa51961-cd1c-4e62-a194-db79901908a6">GCC Stack Protector</a> 有关
</p>
</div>
</div>

<div id="outline-container-org0000056" class="outline-4">
<h4 id="org0000056"><span class="section-number-4">1.8.7.</span> TARGET_STACK_PROTECT_FAIL</h4>
</div>
</div>

<div id="outline-container-org000007a" class="outline-3">
<h3 id="org000007a"><span class="section-number-3">1.9.</span> cost 相关</h3>
<div class="outline-text-3" id="text-1-9">
</div>
<div id="outline-container-org000005c" class="outline-4">
<h4 id="org000005c"><span class="section-number-4">1.9.1.</span> <a href="gcc_cost.html#ID-50a2267b-7dd0-4a07-997f-9dcc76933ba3">TARGET_RTX_COSTS</a></h4>
</div>

<div id="outline-container-org000005f" class="outline-4">
<h4 id="org000005f"><span class="section-number-4">1.9.2.</span> TARGET_ADDRESS_COST</h4>
</div>

<div id="outline-container-org0000062" class="outline-4">
<h4 id="org0000062"><span class="section-number-4">1.9.3.</span> <a href="gcc_cost.html#ID-98f35525-3f8c-4f76-8478-6cab3f3182be">TARGET_SLOW_UNALIGNED_ACCESS</a></h4>
</div>

<div id="outline-container-org0000065" class="outline-4">
<h4 id="org0000065"><span class="section-number-4">1.9.4.</span> MEMORY_MOVE_COST</h4>
</div>

<div id="outline-container-org0000068" class="outline-4">
<h4 id="org0000068"><span class="section-number-4">1.9.5.</span> REGISTER_MOVE_COST</h4>
</div>

<div id="outline-container-org000006b" class="outline-4">
<h4 id="org000006b"><span class="section-number-4">1.9.6.</span> BRANCH_COST</h4>
</div>

<div id="outline-container-org000006e" class="outline-4">
<h4 id="org000006e"><span class="section-number-4">1.9.7.</span> SLOW_BYTE_ACCESS</h4>
</div>

<div id="outline-container-org0000071" class="outline-4">
<h4 id="org0000071"><span class="section-number-4">1.9.8.</span> MOVE_RATIO</h4>
<div class="outline-text-4" id="text-1-9-8">
<p>
是否使用 memcpy?
</p>
</div>
</div>

<div id="outline-container-org0000074" class="outline-4">
<h4 id="org0000074"><span class="section-number-4">1.9.9.</span> CLEAR_RATIO</h4>
<div class="outline-text-4" id="text-1-9-9">
<p>
是否使用 bzero?
</p>
</div>
</div>

<div id="outline-container-org0000077" class="outline-4">
<h4 id="org0000077"><span class="section-number-4">1.9.10.</span> SET_RATIO</h4>
<div class="outline-text-4" id="text-1-9-10">
<p>
是否使用 memset?
</p>
</div>
</div>
</div>

<div id="outline-container-org000008c" class="outline-3">
<h3 id="org000008c"><span class="section-number-3">1.10.</span> schedule 相关</h3>
<div class="outline-text-3" id="text-1-10">
</div>
<div id="outline-container-org000007d" class="outline-4">
<h4 id="org000007d"><span class="section-number-4">1.10.1.</span> <a href="gcc_scheduler.html#ID-38916ef6-f300-47db-8c70-41e3256af352">TARGET_SCHED_ISSUE_RATE</a></h4>
</div>

<div id="outline-container-org0000080" class="outline-4">
<h4 id="org0000080"><span class="section-number-4">1.10.2.</span> TARGET_SCHED_ADJUST_COST</h4>
</div>

<div id="outline-container-org0000083" class="outline-4">
<h4 id="org0000083"><span class="section-number-4">1.10.3.</span> TARGET_SCHED_ADJUST_PRIORITY</h4>
</div>

<div id="outline-container-org0000086" class="outline-4">
<h4 id="org0000086"><span class="section-number-4">1.10.4.</span> TARGET_SCHED_REORDER</h4>
</div>

<div id="outline-container-org0000092" class="outline-4">
<h4 id="org0000092"><span class="section-number-4">1.10.5.</span> &#x2026;</h4>
</div>
</div>

<div id="outline-container-org0000095" class="outline-3">
<h3 id="org0000095"><span class="section-number-3">1.11.</span> assembler format</h3>
<div class="outline-text-3" id="text-1-11">
</div>
<div id="outline-container-org000008f" class="outline-4">
<h4 id="org000008f"><span class="section-number-4">1.11.1.</span> ASM_OUTPUT_LABEL</h4>
</div>

<div id="outline-container-org0000093" class="outline-4">
<h4 id="org0000093"><span class="section-number-4">1.11.2.</span> &#x2026;</h4>
</div>
</div>
</div>



<div id="outline-container-org000009c" class="outline-2 references">
<h2 id="org000009c">Backlinks</h2>
<div class="outline-text-2" id="text-org000009c">
<p>
<a href="gcc_backend.html#ID-02e7f924-9cf7-4e3d-8ceb-1765fd3a2bed">GCC Backend</a>
(<i>GCC Backend &gt; target hook</i>):   <a href="gcc_target_hook.html#ID-ecd308f9-413b-467a-8d55-10bd7485a2bc">target hook</a>
</p>
</div>
</div>
</div>
<div id="postamble" class="status">

<p class="author">Author: sunway@dogdog.run<br />
Date: 2022-04-26 Tue 19:45<br />
Last updated: 2022-11-09 Wed 14:29</p>
<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="知识共享许可协议" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /></a>
</div>
</body>
</html>
