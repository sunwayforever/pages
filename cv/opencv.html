<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2022-01-14 五 11:51 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>OpenCV</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Wei Sun (孙伟)" />
<link rel="stylesheet" type="text/css" href="../stylesheets/main.css" media="screen" />
<script type="text/javascript">
// @license magnet:?xt=urn:btih:e95b018ef3580986a04669f1b5879592219e2a7a&dn=public-domain.txt Public Domain
<!--/*--><![CDATA[/*><!--*/
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.add("code-highlighted");
         target.classList.add("code-highlighted");
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.remove("code-highlighted");
         target.classList.remove("code-highlighted");
       }
     }
    /*]]>*///-->
// @license-end
</script>
</head>
<body>
<div id="content">
<h1 class="title">OpenCV</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orga9da3d5">1. OpenCV</a>
<ul>
<li><a href="#orgd39de02">1.1. Overview</a></li>
<li><a href="#orgd387be8">1.2. <span class="done DONE">DONE</span> affine transform <code>[5/5]</code></a></li>
<li><a href="#org6f7c445">1.3. <span class="todo WAIT">WAIT</span> perspective transform <code>[0/3]</code></a></li>
<li><a href="#org68f0bae">1.4. <span class="todo WAIT">WAIT</span> histogram <code>[0/1]</code></a></li>
<li><a href="#org301b6cf">1.5. <span class="todo WAIT">WAIT</span> threshold</a></li>
<li><a href="#org4daa6a9">1.6. <span class="todo WAIT">WAIT</span> convolution</a></li>
<li><a href="#org76150f0">1.7. <span class="todo WAIT">WAIT</span> gradient</a></li>
<li><a href="#org208bd43">1.8. <span class="done DONE">DONE</span> contours <code>[6/6]</code></a></li>
<li><a href="#orged5d9cc">1.9. <span class="todo WAIT">WAIT</span> calibrate <code>[0/1]</code></a></li>
<li><a href="#orga5405ee">1.10. <span class="todo WAIT">WAIT</span> projection <code>[0/2]</code></a></li>
<li><a href="#orgdf79848">1.11. <span class="todo WAIT">WAIT</span> stereo <code>[0/1]</code></a></li>
<li><a href="#org831baf2">1.12. <span class="done DONE">DONE</span> cv2.KalmanFilter</a></li>
<li><a href="#org5cda19b">1.13. 坑</a>
<ul>
<li><a href="#orgcb8481a">1.13.1. RGB vs. BGR</a></li>
<li><a href="#org96869a5">1.13.2. (col,row) vs. (row,col)</a></li>
<li><a href="#org18ee538">1.13.3. cv2.transform</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-orga9da3d5" class="outline-2">
<h2 id="orga9da3d5"><span class="section-number-2">1</span> OpenCV</h2>
<div class="outline-text-2" id="text-1">
<p>
<span class="timestamp-wrapper"><span class="timestamp">[2020-11-23 一]</span></span>
</p>

<p>
<a href="https://www.tutorialspoint.com/opencv/opencv_overview.htm">https://www.tutorialspoint.com/opencv/opencv_overview.htm</a>
</p>
</div>

<div id="outline-container-orgd39de02" class="outline-3">
<h3 id="orgd39de02"><span class="section-number-3">1.1</span> Overview</h3>
</div>

<div id="outline-container-orgd387be8" class="outline-3">
<h3 id="orgd387be8"><span class="section-number-3">1.2</span> <span class="done DONE">DONE</span> affine transform <code>[5/5]</code></h3>
<div class="outline-text-3" id="text-1-2">
<ul class="org-ul">
<li>State "DONE"       from "TODO"       <span class="timestamp-wrapper"><span class="timestamp">[2020-12-28 一 13:08]</span></span>
<span class="timestamp-wrapper"><span class="timestamp">[2020-12-17 四]</span></span></li>
</ul>

<p>
<a href="file:///home/sunway/Gitbox/code/hello_world/hello_opencv/affine.py">file:~/Gitbox/code/hello_world/hello_opencv/affine.py</a>
</p>

<ul class="org-ul">
<li class="on"><code>[X]</code> cv2.transform</li>

<li class="on"><code>[X]</code> cv2.getAffineTransform</li>

<li class="on"><code>[X]</code> cv2.warpAffine</li>
</ul>


<ul class="org-ul">
<li class="on"><code>[X]</code> cv2.invertAffineTransform</li>
</ul>


<ul class="org-ul">
<li class="on"><code>[X]</code> cv2.getRotationMatrix2D</li>
</ul>
</div>
</div>


<div id="outline-container-org6f7c445" class="outline-3">
<h3 id="org6f7c445"><span class="section-number-3">1.3</span> <span class="todo WAIT">WAIT</span> perspective transform <code>[0/3]</code></h3>
<div class="outline-text-3" id="text-1-3">
<p>
<span class="timestamp-wrapper"><span class="timestamp">[2020-12-28 一]</span></span>
</p>

<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> perspectiveTransform</li>
<li class="off"><code>[&#xa0;]</code> cv2.getPerspectiveTransform</li>
<li class="off"><code>[&#xa0;]</code> warpPerspective</li>
</ul>
</div>
</div>

<div id="outline-container-org68f0bae" class="outline-3">
<h3 id="org68f0bae"><span class="section-number-3">1.4</span> <span class="todo WAIT">WAIT</span> histogram <code>[0/1]</code></h3>
<div class="outline-text-3" id="text-1-4">
<p>
<span class="timestamp-wrapper"><span class="timestamp">[2020-12-25 五]</span></span>
</p>

<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> cv2.matchTemplate</li>
</ul>
</div>
</div>

<div id="outline-container-org301b6cf" class="outline-3">
<h3 id="org301b6cf"><span class="section-number-3">1.5</span> <span class="todo WAIT">WAIT</span> threshold</h3>
</div>

<div id="outline-container-org4daa6a9" class="outline-3">
<h3 id="org4daa6a9"><span class="section-number-3">1.6</span> <span class="todo WAIT">WAIT</span> convolution</h3>
</div>

<div id="outline-container-org76150f0" class="outline-3">
<h3 id="org76150f0"><span class="section-number-3">1.7</span> <span class="todo WAIT">WAIT</span> gradient</h3>
</div>

<div id="outline-container-org208bd43" class="outline-3">
<h3 id="org208bd43"><span class="section-number-3">1.8</span> <span class="done DONE">DONE</span> contours <code>[6/6]</code></h3>
<div class="outline-text-3" id="text-1-8">
<ul class="org-ul">
<li>State "DONE"       from "TODO"       <span class="timestamp-wrapper"><span class="timestamp">[2020-12-28 一 15:18]</span></span></li>
</ul>
<p>
<span class="timestamp-wrapper"><span class="timestamp">[2020-12-16 三]</span></span>
</p>

<p>
<a href="file:///home/sunway/Gitbox/code/hello_world/hello_opencv/contour.py#orgf52bbd8">file:///home/sunway/Gitbox/code/hello_world/hello_opencv/contour.py#orgf52bbd8</a>
</p>

<ul class="org-ul">
<li class="on"><code>[X]</code> cv2.drawContours</li>
<li class="on"><code>[X]</code> cv2.findContours</li>
<li class="on"><code>[X]</code> cv2.contourArea</li>
<li class="on"><code>[X]</code> cv2.isContourConvex</li>
<li class="on"><code>[X]</code> cv2.arcLength</li>
<li class="on"><code>[X]</code> cv2.boundingRect</li>
</ul>
</div>
</div>

<div id="outline-container-orged5d9cc" class="outline-3">
<h3 id="orged5d9cc"><span class="section-number-3">1.9</span> <span class="todo WAIT">WAIT</span> calibrate <code>[0/1]</code></h3>
<div class="outline-text-3" id="text-1-9">
<p>
<span class="timestamp-wrapper"><span class="timestamp">[2020-12-25 五]</span></span>
</p>

<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> cv2.calibrateCamera</li>
</ul>
</div>
</div>

<div id="outline-container-orga5405ee" class="outline-3">
<h3 id="orga5405ee"><span class="section-number-3">1.10</span> <span class="todo WAIT">WAIT</span> projection <code>[0/2]</code></h3>
<div class="outline-text-3" id="text-1-10">
<p>
<span class="timestamp-wrapper"><span class="timestamp">[2020-12-16 三]</span></span>
</p>

<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> cv2.projectPoints</li>
<li class="off"><code>[&#xa0;]</code> cv2.solvePnP</li>
</ul>
</div>
</div>


<div id="outline-container-orgdf79848" class="outline-3">
<h3 id="orgdf79848"><span class="section-number-3">1.11</span> <span class="todo WAIT">WAIT</span> stereo <code>[0/1]</code></h3>
<div class="outline-text-3" id="text-1-11">
<p>
<span class="timestamp-wrapper"><span class="timestamp">[2020-12-25 五]</span></span>
</p>

<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> cv2.stereoCalibrate</li>
</ul>
</div>
</div>

<div id="outline-container-org831baf2" class="outline-3">
<h3 id="org831baf2"><span class="section-number-3">1.12</span> <span class="done DONE">DONE</span> cv2.KalmanFilter</h3>
<div class="outline-text-3" id="text-1-12">
<ul class="org-ul">
<li>State "DONE"       from "TODO"       <span class="timestamp-wrapper"><span class="timestamp">[2020-12-22 二 14:02]</span></span></li>
</ul>
<p>
<span class="timestamp-wrapper"><span class="timestamp">[2020-12-21 一]</span></span>
</p>

<p>
<a href="dsp/kalman_filter.html#orga8306d2">cv2.KalmanFilter</a>
</p>
</div>
</div>

<div id="outline-container-org5cda19b" class="outline-3">
<h3 id="org5cda19b"><span class="section-number-3">1.13</span> 坑</h3>
<div class="outline-text-3" id="text-1-13">
</div>
<div id="outline-container-orgcb8481a" class="outline-4">
<h4 id="orgcb8481a"><span class="section-number-4">1.13.1</span> RGB vs. BGR</h4>
<div class="outline-text-4" id="text-1-13-1">
<p>
imread 返回的图像默认是 BGR, 用 cv2.cvtColor(img, cv2.COLOR_BGR2RGB) 转换为 RGB
</p>
</div>
</div>

<div id="outline-container-org96869a5" class="outline-4">
<h4 id="org96869a5"><span class="section-number-4">1.13.2</span> (col,row) vs. (row,col)</h4>
<div class="outline-text-4" id="text-1-13-2">
<p>
opencv 定义`点`时都是以 (col, row) 的形式, 定义 shape 是 (width, height), 图片的坐标系为:
</p>

<ul class="org-ul">
<li>左上角为原点</li>
<li>横轴为 x 方向</li>
<li>纵轴为 y 方向</li>
</ul>

<p>
所以 opencv 是 (x,y) 的形式, 而 numpy 为 (y,x) 形式, 所以涉及到两者互操作时需要注意转换, 例如:
</p>

<div class="org-src-container">
<pre class="src src-python"><span style="color: #268bd2;">img</span> = cv2.imread<span style="color: #757575;">(</span><span style="color: #2aa198;">"lena.jpg"</span><span style="color: #757575;">)</span>
<span style="color: #268bd2;">src</span> = np.float32<span style="color: #757575;">(</span>[[0<span style="color: #757575;">,</span> 0]<span style="color: #757575;">,</span> [0<span style="color: #757575;">,</span> 1]<span style="color: #757575;">,</span> [1<span style="color: #757575;">,</span> 0]]<span style="color: #757575;">)</span>
<span style="color: #268bd2;">dst</span> = np.float32<span style="color: #757575;">(</span>[[0<span style="color: #757575;">,</span> 10]<span style="color: #757575;">,</span> [0<span style="color: #757575;">,</span> 11]<span style="color: #757575;">,</span> [1<span style="color: #757575;">,</span> 10]]<span style="color: #757575;">)</span>
<span style="color: #268bd2;">M</span> = cv2.getAffineTransform<span style="color: #757575;">(</span>src<span style="color: #757575;">,</span> dst<span style="color: #757575;">)</span>
<span style="color: #586e75;"># </span><span style="color: #586e75;">img.shape &#26159; numpy &#20989;&#25968;, &#36820;&#22238;&#25968;&#25454;&#20026; (y,x,channel), &#38656;&#35201;&#36716;&#25442;&#20026; (x,y)</span>
<span style="color: #268bd2;">img</span> = cv2.warpAffine<span style="color: #757575;">(</span>img<span style="color: #757575;">,</span> M<span style="color: #757575;">,</span> img.shape[:2][::-1]<span style="color: #757575;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org18ee538" class="outline-4">
<h4 id="org18ee538"><span class="section-number-4">1.13.3</span> cv2.transform</h4>
<div class="outline-text-4" id="text-1-13-3">
<p>
<a href="https://stackoverflow.com/questions/44378098/trouble-getting-cv-transform-to-work">https://stackoverflow.com/questions/44378098/trouble-getting-cv-transform-to-work</a>
</p>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">

<div id="disqus_thread"></div>
<script>

(function() { // DON'T EDIT BELOW THIS LINE
         var d = document, s = d.createElement('script');
         s.src = '//sunwayforever-github-io.disqus.com/embed.js';
         s.setAttribute('data-timestamp', +new Date());
         (d.head || d.body).appendChild(s);
         })();
</script>
</div>
</body>
</html>
