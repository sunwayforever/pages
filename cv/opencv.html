<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2022-01-19 三 12:58 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>OpenCV</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Wei Sun (孙伟)" />
<link rel="stylesheet" type="text/css" href="/main.css" media="screen" />
<link rel = "icon" href = "/icon.png"  type = "image/x-icon">
<script type="text/javascript">
// @license magnet:?xt=urn:btih:e95b018ef3580986a04669f1b5879592219e2a7a&dn=public-domain.txt Public Domain
<!--/*--><![CDATA[/*><!--*/
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.add("code-highlighted");
         target.classList.add("code-highlighted");
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.remove("code-highlighted");
         target.classList.remove("code-highlighted");
       }
     }
    /*]]>*///-->
// @license-end
</script>
</head>
<body>
<div id="content">
<h1 class="title">OpenCV</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgdb6ece3">1. OpenCV</a>
<ul>
<li><a href="#orgd73fa31">1.1. Overview</a></li>
<li><a href="#org69cf2ec">1.2. affine transform <code>[5/5]</code></a></li>
<li><a href="#orgb317c27">1.3. perspective transform <code>[0/3]</code></a></li>
<li><a href="#org5ea0002">1.4. histogram <code>[0/1]</code></a></li>
<li><a href="#orgf1ca566">1.5. threshold</a></li>
<li><a href="#org5f03689">1.6. convolution</a></li>
<li><a href="#org7f18e46">1.7. gradient</a></li>
<li><a href="#orgd214da8">1.8. contours <code>[6/6]</code></a></li>
<li><a href="#orge329ae7">1.9. calibrate <code>[0/1]</code></a></li>
<li><a href="#orgfecc780">1.10. projection <code>[0/2]</code></a></li>
<li><a href="#org4fd502b">1.11. stereo <code>[0/1]</code></a></li>
<li><a href="#org744f929">1.12. cv2.KalmanFilter</a></li>
<li><a href="#org2886a74">1.13. 坑</a>
<ul>
<li><a href="#org5f5f3bc">1.13.1. RGB vs. BGR</a></li>
<li><a href="#org74df7ba">1.13.2. (col,row) vs. (row,col)</a></li>
<li><a href="#orgb1eaa2d">1.13.3. cv2.transform</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-orgdb6ece3" class="outline-2">
<h2 id="orgdb6ece3"><span class="section-number-2">1</span> OpenCV</h2>
<div class="outline-text-2" id="text-1">
<p>
<span class="timestamp-wrapper"><span class="timestamp">[2020-11-23 一]</span></span>
</p>

<p>
<a href="https://www.tutorialspoint.com/opencv/opencv_overview.htm">https://www.tutorialspoint.com/opencv/opencv_overview.htm</a>
</p>
</div>

<div id="outline-container-orgd73fa31" class="outline-3">
<h3 id="orgd73fa31"><span class="section-number-3">1.1</span> Overview</h3>
</div>

<div id="outline-container-org69cf2ec" class="outline-3">
<h3 id="org69cf2ec"><span class="section-number-3">1.2</span> affine transform <code>[5/5]</code></h3>
<div class="outline-text-3" id="text-1-2">
<ul class="org-ul">
<li>State "DONE"       from "TODO"       <span class="timestamp-wrapper"><span class="timestamp">[2020-12-28 一 13:08]</span></span>
<span class="timestamp-wrapper"><span class="timestamp">[2020-12-17 四]</span></span></li>
</ul>

<p>
<a href="file:///home/sunway/Gitbox/code/hello_world/hello_opencv/affine.py">file:~/Gitbox/code/hello_world/hello_opencv/affine.py</a>
</p>

<ul class="org-ul">
<li class="on"><code>[X]</code> cv2.transform</li>

<li class="on"><code>[X]</code> cv2.getAffineTransform</li>

<li class="on"><code>[X]</code> cv2.warpAffine</li>
</ul>


<ul class="org-ul">
<li class="on"><code>[X]</code> cv2.invertAffineTransform</li>
</ul>


<ul class="org-ul">
<li class="on"><code>[X]</code> cv2.getRotationMatrix2D</li>
</ul>
</div>
</div>


<div id="outline-container-orgb317c27" class="outline-3">
<h3 id="orgb317c27"><span class="section-number-3">1.3</span> perspective transform <code>[0/3]</code></h3>
<div class="outline-text-3" id="text-1-3">
<p>
<span class="timestamp-wrapper"><span class="timestamp">[2020-12-28 一]</span></span>
</p>

<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> perspectiveTransform</li>
<li class="off"><code>[&#xa0;]</code> cv2.getPerspectiveTransform</li>
<li class="off"><code>[&#xa0;]</code> warpPerspective</li>
</ul>
</div>
</div>

<div id="outline-container-org5ea0002" class="outline-3">
<h3 id="org5ea0002"><span class="section-number-3">1.4</span> histogram <code>[0/1]</code></h3>
<div class="outline-text-3" id="text-1-4">
<p>
<span class="timestamp-wrapper"><span class="timestamp">[2020-12-25 五]</span></span>
</p>

<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> cv2.matchTemplate</li>
</ul>
</div>
</div>

<div id="outline-container-orgf1ca566" class="outline-3">
<h3 id="orgf1ca566"><span class="section-number-3">1.5</span> threshold</h3>
</div>

<div id="outline-container-org5f03689" class="outline-3">
<h3 id="org5f03689"><span class="section-number-3">1.6</span> convolution</h3>
</div>

<div id="outline-container-org7f18e46" class="outline-3">
<h3 id="org7f18e46"><span class="section-number-3">1.7</span> gradient</h3>
</div>

<div id="outline-container-orgd214da8" class="outline-3">
<h3 id="orgd214da8"><span class="section-number-3">1.8</span> contours <code>[6/6]</code></h3>
<div class="outline-text-3" id="text-1-8">
<ul class="org-ul">
<li>State "DONE"       from "TODO"       <span class="timestamp-wrapper"><span class="timestamp">[2020-12-28 一 15:18]</span></span></li>
</ul>
<p>
<span class="timestamp-wrapper"><span class="timestamp">[2020-12-16 三]</span></span>
</p>

<p>
<a href="file:///home/sunway/Gitbox/code/hello_world/hello_opencv/contour.py#orgfced4bb">file:///home/sunway/Gitbox/code/hello_world/hello_opencv/contour.py#orgfced4bb</a>
</p>

<ul class="org-ul">
<li class="on"><code>[X]</code> cv2.drawContours</li>
<li class="on"><code>[X]</code> cv2.findContours</li>
<li class="on"><code>[X]</code> cv2.contourArea</li>
<li class="on"><code>[X]</code> cv2.isContourConvex</li>
<li class="on"><code>[X]</code> cv2.arcLength</li>
<li class="on"><code>[X]</code> cv2.boundingRect</li>
</ul>
</div>
</div>

<div id="outline-container-orge329ae7" class="outline-3">
<h3 id="orge329ae7"><span class="section-number-3">1.9</span> calibrate <code>[0/1]</code></h3>
<div class="outline-text-3" id="text-1-9">
<p>
<span class="timestamp-wrapper"><span class="timestamp">[2020-12-25 五]</span></span>
</p>

<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> cv2.calibrateCamera</li>
</ul>
</div>
</div>

<div id="outline-container-orgfecc780" class="outline-3">
<h3 id="orgfecc780"><span class="section-number-3">1.10</span> projection <code>[0/2]</code></h3>
<div class="outline-text-3" id="text-1-10">
<p>
<span class="timestamp-wrapper"><span class="timestamp">[2020-12-16 三]</span></span>
</p>

<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> cv2.projectPoints</li>
<li class="off"><code>[&#xa0;]</code> cv2.solvePnP</li>
</ul>
</div>
</div>


<div id="outline-container-org4fd502b" class="outline-3">
<h3 id="org4fd502b"><span class="section-number-3">1.11</span> stereo <code>[0/1]</code></h3>
<div class="outline-text-3" id="text-1-11">
<p>
<span class="timestamp-wrapper"><span class="timestamp">[2020-12-25 五]</span></span>
</p>

<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> cv2.stereoCalibrate</li>
</ul>
</div>
</div>

<div id="outline-container-org744f929" class="outline-3">
<h3 id="org744f929"><span class="section-number-3">1.12</span> cv2.KalmanFilter</h3>
<div class="outline-text-3" id="text-1-12">
<ul class="org-ul">
<li>State "DONE"       from "TODO"       <span class="timestamp-wrapper"><span class="timestamp">[2020-12-22 二 14:02]</span></span></li>
</ul>
<p>
<span class="timestamp-wrapper"><span class="timestamp">[2020-12-21 一]</span></span>
</p>

<p>
<a href="dsp/kalman_filter.html#orge99a207">cv2.KalmanFilter</a>
</p>
</div>
</div>

<div id="outline-container-org2886a74" class="outline-3">
<h3 id="org2886a74"><span class="section-number-3">1.13</span> 坑</h3>
<div class="outline-text-3" id="text-1-13">
</div>
<div id="outline-container-org5f5f3bc" class="outline-4">
<h4 id="org5f5f3bc"><span class="section-number-4">1.13.1</span> RGB vs. BGR</h4>
<div class="outline-text-4" id="text-1-13-1">
<p>
imread 返回的图像默认是 BGR, 用 cv2.cvtColor(img, cv2.COLOR_BGR2RGB) 转换为 RGB
</p>
</div>
</div>

<div id="outline-container-org74df7ba" class="outline-4">
<h4 id="org74df7ba"><span class="section-number-4">1.13.2</span> (col,row) vs. (row,col)</h4>
<div class="outline-text-4" id="text-1-13-2">
<p>
opencv 定义`点`时都是以 (col, row) 的形式, 定义 shape 是 (width, height), 图片的坐标系为:
</p>

<ul class="org-ul">
<li>左上角为原点</li>
<li>横轴为 x 方向</li>
<li>纵轴为 y 方向</li>
</ul>

<p>
所以 opencv 是 (x,y) 的形式, 而 numpy 为 (y,x) 形式, 所以涉及到两者互操作时需要注意转换, 例如:
</p>

<div class="org-src-container">
<pre class="src src-python"><span style="color: #268bd2;">img</span> = cv2.imread<span style="color: #757575;">(</span><span style="color: #2aa198;">"lena.jpg"</span><span style="color: #757575;">)</span>
<span style="color: #268bd2;">src</span> = np.float32<span style="color: #757575;">(</span>[[0<span style="color: #757575;">,</span> 0]<span style="color: #757575;">,</span> [0<span style="color: #757575;">,</span> 1]<span style="color: #757575;">,</span> [1<span style="color: #757575;">,</span> 0]]<span style="color: #757575;">)</span>
<span style="color: #268bd2;">dst</span> = np.float32<span style="color: #757575;">(</span>[[0<span style="color: #757575;">,</span> 10]<span style="color: #757575;">,</span> [0<span style="color: #757575;">,</span> 11]<span style="color: #757575;">,</span> [1<span style="color: #757575;">,</span> 10]]<span style="color: #757575;">)</span>
<span style="color: #268bd2;">M</span> = cv2.getAffineTransform<span style="color: #757575;">(</span>src<span style="color: #757575;">,</span> dst<span style="color: #757575;">)</span>
<span style="color: #586e75;"># </span><span style="color: #586e75;">img.shape &#26159; numpy &#20989;&#25968;, &#36820;&#22238;&#25968;&#25454;&#20026; (y,x,channel), &#38656;&#35201;&#36716;&#25442;&#20026; (x,y)</span>
<span style="color: #268bd2;">img</span> = cv2.warpAffine<span style="color: #757575;">(</span>img<span style="color: #757575;">,</span> M<span style="color: #757575;">,</span> img.shape[:2][::-1]<span style="color: #757575;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb1eaa2d" class="outline-4">
<h4 id="orgb1eaa2d"><span class="section-number-4">1.13.3</span> cv2.transform</h4>
<div class="outline-text-4" id="text-1-13-3">
<p>
<a href="https://stackoverflow.com/questions/44378098/trouble-getting-cv-transform-to-work">https://stackoverflow.com/questions/44378098/trouble-getting-cv-transform-to-work</a>
</p>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">

<p class="author">Author: sunway (sunwayforever@gmail.com)<br />
Date: 2020-12-25 五 00:00<br />
Last updated: 2021-12-30 四 17:27</p>
<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="知识共享许可协议" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /></a><br />本作品采用<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a>进行许可。
<br />

<div id="disqus_thread"></div>
<script>

(function() { // DON'T EDIT BELOW THIS LINE
         var d = document, s = d.createElement('script');
         s.src = '//sunwayforever-github-io.disqus.com/embed.js';
         s.setAttribute('data-timestamp', +new Date());
         (d.head || d.body).appendChild(s);
         })();
</script>
</div>
</body>
</html>
